{"version":3,"sources":["../../packages/setting-management/config/src/providers/route.provider.ts","../../../packages/setting-management/config/src/setting-management-config.module.ts"],"names":["SETTING_MANAGEMENT_ROUTE_PROVIDERS","provide","APP_INITIALIZER","useFactory","configureRoutes","deps","RoutesService","multi","hideRoutes","SettingTabsService","routesService","add","name","path","parentName","layout","order","iconClass","settingTabsService","visible$","pipe","debounceTime","map","nodes","length","subscribe","invisible","patch","SettingManagementConfigModule","forRoot","ngModule","providers","NgModule"],"mappings":"mkBAMaA,EAAqC,CAChD,CAAEC,QAASC,EAAAA,gBAAiBC,WAAYC,EAAiBC,KAAM,CAACC,EAAAA,eAAgBC,OAAO,GACvF,CACEN,QAASC,EAAAA,gBACTC,WAAYK,EACZH,KAAM,CAACC,EAAAA,cAAeG,EAAAA,oBACtBF,OAAO,aAIKH,EAAgBM,GAC9B,OAAO,WACLA,EAAcC,IAAI,CAChB,CACEC,KAAI,iCACJC,KAAM,sBACNC,WAAU,uCACVC,OAAM,cACNC,MAAO,IACPC,UAAW,yBAMHT,EAAWE,EAA8BQ,GACvD,OAAO,WACLA,EAAmBC,SAChBC,KACCC,EAAAA,aAAa,GACbC,EAAAA,KAAI,SAAAC,GAAS,OAACA,EAAMC,WAErBC,WAAU,SAAAC,GACT,OAAAhB,EAAciB,MAAK,iCAAwC,CAAED,UAASA,yBCnC9E,SAAAE,YACSA,EAAAC,QAAP,WACE,MAAO,CACLC,SAAUF,EACVG,UAAW,CAAC/B,8BALjBgC,EAAAA","sourcesContent":["import { eLayoutType, RoutesService, SettingTabsService } from '@abp/ng.core';\nimport { eThemeSharedRouteNames } from '@abp/ng.theme.shared';\nimport { APP_INITIALIZER } from '@angular/core';\nimport { debounceTime, map } from 'rxjs/operators';\nimport { eSettingManagementRouteNames } from '../enums/route-names';\n\nexport const SETTING_MANAGEMENT_ROUTE_PROVIDERS = [\n  { provide: APP_INITIALIZER, useFactory: configureRoutes, deps: [RoutesService], multi: true },\n  {\n    provide: APP_INITIALIZER,\n    useFactory: hideRoutes,\n    deps: [RoutesService, SettingTabsService],\n    multi: true,\n  },\n];\n\nexport function configureRoutes(routesService: RoutesService) {\n  return () => {\n    routesService.add([\n      {\n        name: eSettingManagementRouteNames.Settings,\n        path: '/setting-management',\n        parentName: eThemeSharedRouteNames.Administration,\n        layout: eLayoutType.application,\n        order: 100,\n        iconClass: 'fa fa-cog',\n      },\n    ]);\n  };\n}\n\nexport function hideRoutes(routesService: RoutesService, settingTabsService: SettingTabsService) {\n  return () => {\n    settingTabsService.visible$\n      .pipe(\n        debounceTime(0),\n        map(nodes => !nodes.length),\n      )\n      .subscribe(invisible =>\n        routesService.patch(eSettingManagementRouteNames.Settings, { invisible }),\n      );\n  };\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { SETTING_MANAGEMENT_ROUTE_PROVIDERS } from './providers/route.provider';\n\n@NgModule()\nexport class SettingManagementConfigModule {\n  static forRoot(): ModuleWithProviders<SettingManagementConfigModule> {\n    return {\n      ngModule: SettingManagementConfigModule,\n      providers: [SETTING_MANAGEMENT_ROUTE_PROVIDERS],\n    };\n  }\n}\n"]}