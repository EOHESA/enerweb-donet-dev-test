import{ConfigStateService}from"@abp/ng.core";import{ExtensionsService,getObjectExtensionEntitiesFromStore,mapEntitiesToContributors,mergeWithDefaultActions,mergeWithDefaultProps}from"@abp/ng.theme.shared/extensions";import{Injectable,Injector}from"@angular/core";import{map,mapTo,tap}from"rxjs/operators";import{DEFAULT_IDENTITY_CREATE_FORM_PROPS,DEFAULT_IDENTITY_EDIT_FORM_PROPS,DEFAULT_IDENTITY_ENTITY_ACTIONS,DEFAULT_IDENTITY_ENTITY_PROPS,DEFAULT_IDENTITY_TOOLBAR_ACTIONS,IDENTITY_CREATE_FORM_PROP_CONTRIBUTORS,IDENTITY_EDIT_FORM_PROP_CONTRIBUTORS,IDENTITY_ENTITY_ACTION_CONTRIBUTORS,IDENTITY_ENTITY_PROP_CONTRIBUTORS,IDENTITY_TOOLBAR_ACTION_CONTRIBUTORS}from"../tokens/extensions.token";export class IdentityExtensionsGuard{constructor(t){this.injector=t}canActivate(){const t=this.injector.get(ExtensionsService),e=this.injector.get(IDENTITY_ENTITY_ACTION_CONTRIBUTORS,null)||{},T=this.injector.get(IDENTITY_TOOLBAR_ACTION_CONTRIBUTORS,null)||{},o=this.injector.get(IDENTITY_ENTITY_PROP_CONTRIBUTORS,null)||{},I=this.injector.get(IDENTITY_CREATE_FORM_PROP_CONTRIBUTORS,null)||{},n=this.injector.get(IDENTITY_EDIT_FORM_PROP_CONTRIBUTORS,null)||{},i=this.injector.get(ConfigStateService);return getObjectExtensionEntitiesFromStore(i,"Identity").pipe(map(t=>({"Identity.ClaimsComponent":t.ClaimType,"Identity.RolesComponent":t.Role,"Identity.UsersComponent":t.User,"Identity.OrganizationUnitsComponent":t.OrganizationUnit})),mapEntitiesToContributors(i,"AbpIdentity"),tap(i=>{mergeWithDefaultActions(t.entityActions,DEFAULT_IDENTITY_ENTITY_ACTIONS,e),mergeWithDefaultActions(t.toolbarActions,DEFAULT_IDENTITY_TOOLBAR_ACTIONS,T),mergeWithDefaultProps(t.entityProps,DEFAULT_IDENTITY_ENTITY_PROPS,i.prop,o),mergeWithDefaultProps(t.createFormProps,DEFAULT_IDENTITY_CREATE_FORM_PROPS,i.createForm,I),mergeWithDefaultProps(t.editFormProps,DEFAULT_IDENTITY_EDIT_FORM_PROPS,i.editForm,n)}),mapTo(!0))}}IdentityExtensionsGuard.decorators=[{type:Injectable}],IdentityExtensionsGuard.ctorParameters=()=>[{type:Injector}];