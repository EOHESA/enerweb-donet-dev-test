!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@abp/ng.core"),require("@angular/core"),require("@volo/abp.ng.account/admin"),require("@volo/abp.commercial.ng.ui"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@volo/abp.ng.account/config",["exports","@abp/ng.core","@angular/core","@volo/abp.ng.account/admin","@volo/abp.commercial.ng.ui","rxjs/operators"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).volo=e.volo||{},e.volo.abp=e.volo.abp||{},e.volo.abp.ng=e.volo.abp.ng||{},e.volo.abp.ng.account=e.volo.abp.ng.account||{},e.volo.abp.ng.account.config={}),e.i1,e.ng.core,e.volo.abp.ng.account.admin,e.abp_commercial_ng_ui,e.rxjs.operators)}(this,(function(e,t,o,r,n,i){"use strict";var c={type:"icon",source:"fas fa-user bg-light"},u=function(e){var t=this;this.restService=e,this.url="/api/account-admin/settings",this.publicApiName="AbpAccountPublic",this.getProfilePicture=function(e,o){return void 0===o&&(o=!1),t.restService.request({method:"GET",url:"/api/account/profile-picture/"+e},{apiName:t.publicApiName,skipHandleError:o})},this.setProfilePicture=function(e){return t.restService.request({method:"POST",url:"/api/account/profile-picture",body:e},{apiName:t.publicApiName})}};u.ɵprov=o.ɵɵdefineInjectable({factory:function(){return new u(o.ɵɵinject(t.RestService))},token:u,providedIn:"root"}),u.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],u.ctorParameters=function(){return[{type:t.RestService}]};var a=function(){function e(e,t,o){this.profilePictureService=e,this.injector=t,this.configState=o,this.listenToAppConfig()}return e.prototype.listenToAppConfig=function(){var e=this,t=this.injector.get(n.PROFILE_PICTURE);this.configState.createOnUpdateStream((function(e){return e})).pipe(i.map((function(){return e.configState.getDeep("currentUser.id")})),i.filter((function(t){return t!==e.currentUserId})),i.tap((function(o){e.currentUserId=o,o||t.next(null)})),i.filter((function(e){return!!e})),i.switchMap((function(t){return e.profilePictureService.getProfilePicture(t,!0)}))).subscribe((function(e){t.next({type:"image",source:e.source||"data:image/png;base64,"+e.fileContent})}),(function(){t.next(c)}))},e}();a.ɵprov=o.ɵɵdefineInjectable({factory:function(){return new a(o.ɵɵinject(u),o.ɵɵinject(o.INJECTOR),o.ɵɵinject(t.ConfigStateService))},token:a,providedIn:"root"}),a.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[{type:u},{type:o.Injector},{type:t.ConfigStateService}]};var p=[{provide:o.APP_INITIALIZER,useFactory:s,deps:[t.SettingTabsService],multi:!0}];function s(e){return function(){e.add([{name:"AbpAccount::Menu:Account",order:3,requiredPolicy:"AbpAccount.SettingManagement",component:r.AccountSettingsComponent}])}}var l,f=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[p,{provide:o.APP_INITIALIZER,multi:!0,deps:[a],useFactory:t.noop}]}},e}();f.decorators=[{type:o.NgModule,args:[{imports:[t.CoreModule,r.AccountSettingsModule],exports:[r.AccountSettingsModule],declarations:[]}]}],(l=e.ProfilePictureType||(e.ProfilePictureType={}))[l.None=0]="None",l[l.Gravatar=1]="Gravatar",l[l.Image=2]="Image";var d=t.mapEnumToOptions(e.ProfilePictureType);e.ACCOUNT_SETTING_TAB_PROVIDERS=p,e.AccountConfigModule=f,e.DEFAULT_PROFILE_ICON=c,e.ProfilePictureHandler=a,e.ProfilePictureService=u,e.configureSettingTabs=s,e.profilePictureTypeOptions=d,e.ɵa=p,e.ɵb=s,e.ɵc=a,e.ɵd=u,Object.defineProperty(e,"__esModule",{value:!0})}));