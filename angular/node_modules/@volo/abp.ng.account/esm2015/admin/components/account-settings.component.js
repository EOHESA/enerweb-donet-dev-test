import{Component}from"@angular/core";import{ConfigStateService,SessionStateService}from"@abp/ng.core";import{of}from"rxjs";import{map}from"rxjs/operators";import{AccountExternalProviderService}from"../services/account-external-provider.service";import{AccountCaptchaService}from"../services/account-captcha.service";import{eTwoFactorBehaviour}from"../enums/two-factor-behaviour";export class AccountSettingsComponent{constructor(t,n,e,a){this.configStateService=t,this.sessionStateService=n,this.captchaService=e,this.externalProviderService=a}ngOnInit(){var t;this.isLdapSettingsEnabled="false"!==this.configStateService.getFeature("Account.EnableLdapLogin").toLowerCase(),this.isTwoFactorSettingsEnabled=this.configStateService.getFeature("Identity.TwoFactor")===eTwoFactorBehaviour[eTwoFactorBehaviour.Optional],this.isTenant=null===(t=this.sessionStateService.getTenant())||void 0===t?void 0:t.isAvailable,this.isTenant?(this.isExternalProviderEnabled$=this.externalProviderService.getSettings().pipe(map(t=>t.settings.some(t=>t.enabled))),this.isCaptchaEnabled$=this.captchaService.getSettings().pipe(map(t=>t.useCaptchaOnLogin||t.useCaptchaOnRegistration))):(this.isExternalProviderEnabled$=of(!0),this.isCaptchaEnabled$=of(!0))}}AccountSettingsComponent.decorators=[{type:Component,args:[{selector:"abp-account-settings",template:'<h2>{{ \'AbpAccount::Menu:Account\' | abpLocalization }}</h2>\r\n<hr class="my-4" />\r\n\r\n<div id="AccountSettingsForm" class="row">\r\n  <div class="col-md-12">\r\n    <ul ngbNav #nav="ngbNav" class="nav-tabs">\r\n      <li ngbNavItem>\r\n        <a ngbNavLink>{{ \'AbpAccount::AccountSettingsGeneral\' | abpLocalization }}</a>\r\n        <ng-template ngbNavContent>\r\n          <abp-account-settings-general [isTenant]="isTenant"></abp-account-settings-general>\r\n        </ng-template>\r\n      </li>\r\n      <li ngbNavItem *ngIf="isTwoFactorSettingsEnabled">\r\n        <a ngbNavLink>{{ \'AbpAccount::AccountSettingsTwoFactor\' | abpLocalization }}</a>\r\n        <ng-template ngbNavContent>\r\n          <abp-account-settings-two-factor [isTenant]="isTenant"></abp-account-settings-two-factor>\r\n        </ng-template>\r\n      </li>\r\n      <li ngbNavItem *ngIf="isLdapSettingsEnabled">\r\n        <a ngbNavLink>{{ \'AbpAccount::AccountSettingsLdap\' | abpLocalization }}</a>\r\n        <ng-template ngbNavContent>\r\n          <abp-account-settings-ldap [isTenant]="isTenant"></abp-account-settings-ldap>\r\n        </ng-template>\r\n      </li>\r\n      <li ngbNavItem *ngIf="isCaptchaEnabled$ | async">\r\n        <a ngbNavLink>\r\n          {{ \'AbpAccount::Captcha\' | abpLocalization }}\r\n        </a>\r\n        <ng-template ngbNavContent>\r\n          <abp-account-settings-captcha [isTenant]="isTenant"></abp-account-settings-captcha>\r\n        </ng-template>\r\n      </li>\r\n      <li ngbNavItem *ngIf="isExternalProviderEnabled$ | async">\r\n        <a ngbNavLink>\r\n          {{ \'AbpAccount::AccountExternalProviderSettings\' | abpLocalization }}\r\n        </a>\r\n        <ng-template ngbNavContent>\r\n          <abp-account-settings-external-provider\r\n            [isTenant]="isTenant"\r\n          ></abp-account-settings-external-provider>\r\n        </ng-template>\r\n      </li>\r\n    </ul>\r\n    <div [ngbNavOutlet]="nav"></div>\r\n  </div>\r\n</div>\r\n',providers:[AccountExternalProviderService,AccountCaptchaService]}]}],AccountSettingsComponent.ctorParameters=()=>[{type:ConfigStateService},{type:SessionStateService},{type:AccountCaptchaService},{type:AccountExternalProviderService}];