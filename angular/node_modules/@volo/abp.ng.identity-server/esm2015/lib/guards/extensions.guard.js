import{ConfigStateService}from"@abp/ng.core";import{ExtensionsService,getObjectExtensionEntitiesFromStore,mapEntitiesToContributors,mergeWithDefaultActions,mergeWithDefaultProps}from"@abp/ng.theme.shared/extensions";import{Injectable,Injector}from"@angular/core";import{map,mapTo,tap}from"rxjs/operators";import{DEFAULT_IDENTITY_SERVER_CREATE_FORM_PROPS,DEFAULT_IDENTITY_SERVER_EDIT_FORM_PROPS,DEFAULT_IDENTITY_SERVER_ENTITY_ACTIONS,DEFAULT_IDENTITY_SERVER_ENTITY_PROPS,DEFAULT_IDENTITY_SERVER_TOOLBAR_ACTIONS,IDENTITY_SERVER_CREATE_FORM_PROP_CONTRIBUTORS,IDENTITY_SERVER_EDIT_FORM_PROP_CONTRIBUTORS,IDENTITY_SERVER_ENTITY_ACTION_CONTRIBUTORS,IDENTITY_SERVER_ENTITY_PROP_CONTRIBUTORS,IDENTITY_SERVER_TOOLBAR_ACTION_CONTRIBUTORS}from"../tokens/extensions.token";export class IdentityServerExtensionsGuard{constructor(e){this.injector=e}canActivate(){const e=this.injector.get(ExtensionsService),t=this.injector.get(IDENTITY_SERVER_ENTITY_ACTION_CONTRIBUTORS,null)||{},T=this.injector.get(IDENTITY_SERVER_TOOLBAR_ACTION_CONTRIBUTORS,null)||{},E=this.injector.get(IDENTITY_SERVER_ENTITY_PROP_CONTRIBUTORS,null)||{},r=this.injector.get(IDENTITY_SERVER_CREATE_FORM_PROP_CONTRIBUTORS,null)||{},R=this.injector.get(IDENTITY_SERVER_EDIT_FORM_PROP_CONTRIBUTORS,null)||{},o=this.injector.get(ConfigStateService);return getObjectExtensionEntitiesFromStore(o,"IdentityServer").pipe(map(e=>({"IdentityServer.ApiResourcesComponent":e.ApiResource,"IdentityServer.ClientsComponent":e.Client,"IdentityServer.IdentityResourcesComponent":e.IdentityResource,"IdentityServer.ApiScopesComponent":e.ApiScope})),mapEntitiesToContributors(o,"AbpIdentityServer"),tap(o=>{mergeWithDefaultActions(e.entityActions,DEFAULT_IDENTITY_SERVER_ENTITY_ACTIONS,t),mergeWithDefaultActions(e.toolbarActions,DEFAULT_IDENTITY_SERVER_TOOLBAR_ACTIONS,T),mergeWithDefaultProps(e.entityProps,DEFAULT_IDENTITY_SERVER_ENTITY_PROPS,o.prop,E),mergeWithDefaultProps(e.createFormProps,DEFAULT_IDENTITY_SERVER_CREATE_FORM_PROPS,o.createForm,r),mergeWithDefaultProps(e.editFormProps,DEFAULT_IDENTITY_SERVER_EDIT_FORM_PROPS,o.editForm,R)}),mapTo(!0))}}IdentityServerExtensionsGuard.decorators=[{type:Injectable}],IdentityServerExtensionsGuard.ctorParameters=()=>[{type:Injector}];