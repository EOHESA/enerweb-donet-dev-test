import{Component,Input,ChangeDetectionStrategy}from"@angular/core";import{IdentityServerModalTabComponent}from"../identity-server-modal-tab.component";export class IdentityServerModalFreeTextValuesTabComponent extends IdentityServerModalTabComponent{constructor(){super(...arguments),this.model={},this.trackByFn=()=>this.fields[0].name}add(){this.fields.map(e=>this.model[e.name]).filter(e=>!!e).length===this.fields.length&&this.uniqueSelect()&&(this.selected.push(this.model),this.model={})}getValue(){const e={[this.fieldName]:this.selected};return this.checkboxFieldName&&(e[this.checkboxFieldName]=this.checkboxValue),e}delete(e){this.selected.splice(e,1)}contains(e,t){return this.selected.findIndex(n=>n[e]===t)>-1}uniqueSelect(){const e=this.fields.filter(e=>"select"===e.type)[0];return!(e&&this.contains(e.name,this.model[e.name]))}}IdentityServerModalFreeTextValuesTabComponent.decorators=[{type:Component,args:[{selector:"abp-identity-server-modal-free-text-values-tab",template:'<ng-template>\r\n  <h3>{{ \'AbpIdentityServer::\' + (formTitle || title) | abpLocalization }}</h3>\r\n  <div class="pt-3 pb-5 clearfix">\r\n    <form (submit)="add()">\r\n      <div class="row">\r\n        <ng-container *ngFor="let field of fields">\r\n          <div class="col-{{ 12 / fields.length }}">\r\n            <div class="form-group">\r\n              <label [for]="\'sample-propert-\' + field.name"\r\n                >{{ \'AbpIdentityServer::\' + field.title | abpLocalization }}\r\n              </label>\r\n\r\n              <ng-container [ngSwitch]="field.type">\r\n                <ng-container *ngSwitchCase="\'select\'">\r\n                  <select\r\n                    class="form-control"\r\n                    [id]="\'sample-propert-\' + field.name"\r\n                    [name]="\'sample-propert-\' + field.name"\r\n                    [(ngModel)]="model[field.name]"\r\n                  >\r\n                    <option *ngFor="let option of field.selectOptions" [ngValue]="option.value">\r\n                      {{ option.key }}\r\n                    </option>\r\n                  </select>\r\n                </ng-container>\r\n\r\n                <ng-container *ngSwitchDefault>\r\n                  <input\r\n                    type="text"\r\n                    [id]="\'sample-propert-\' + field.name"\r\n                    [name]="\'sample-propert-\' + field.name"\r\n                    class="form-control"\r\n                    aria-invalid="false"\r\n                    [(ngModel)]="model[field.name]"\r\n                  />\r\n                </ng-container>\r\n              </ng-container>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      <button id="add-new-property" class="float-right mb-2 btn btn-success" type="submit">\r\n        <i class="fa fa-plus"></i> {{ \'AbpIdentityServer::AddNew\' | abpLocalization }}\r\n      </button>\r\n    </form>\r\n  </div>\r\n\r\n  <div *ngIf="checkboxFieldName" class="custom-checkbox custom-control mb-2">\r\n    <input\r\n      [id]="checkboxFieldName"\r\n      [name]="checkboxFieldName"\r\n      type="checkbox"\r\n      [(ngModel)]="checkboxValue"\r\n      class="custom-control-input"\r\n    /><label class="custom-control-label" [for]="checkboxFieldName">{{\r\n      \'AbpIdentityServer::\' + checkboxLabel | abpLocalization\r\n    }}</label>\r\n  </div>\r\n\r\n  <div *ngIf="selected?.length" class="table-responsive-sm">\r\n    <table id="property-table" class="table table-striped">\r\n      <thead>\r\n        <th *ngFor="let field of fields" scope="col">\r\n          {{ \'AbpIdentityServer::\' + field.title | abpLocalization }}\r\n        </th>\r\n        <th scope="col"></th>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor="let row of selected; trackBy: trackByFn; let i = index">\r\n          <td *ngFor="let field of fields">{{ row[field.name] }}</td>\r\n          <td>\r\n            <button type="button" class="btn btn-outline-danger float-right" (click)="delete(i)">\r\n              <i class="fa fa-trash"></i>\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</ng-template>\r\n',providers:[{provide:IdentityServerModalTabComponent,useExisting:IdentityServerModalFreeTextValuesTabComponent}],changeDetection:ChangeDetectionStrategy.OnPush}]}],IdentityServerModalFreeTextValuesTabComponent.propDecorators={selected:[{type:Input}],fields:[{type:Input}],fieldName:[{type:Input}],formTitle:[{type:Input}],checkboxValue:[{type:Input}],checkboxFieldName:[{type:Input}],checkboxLabel:[{type:Input}]};