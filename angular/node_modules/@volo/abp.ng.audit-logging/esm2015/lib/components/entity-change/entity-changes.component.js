import{ListService,mapEnumToOptions,TrackByService}from"@abp/ng.core";import{DateAdapter,EXTENSIONS_IDENTIFIER}from"@abp/ng.theme.shared/extensions";import{ChangeDetectionStrategy,Component}from"@angular/core";import{FormBuilder}from"@angular/forms";import{NgbDateAdapter}from"@ng-bootstrap/ng-bootstrap";import{AuditLogsService}from"../../proxy/audit-logging/audit-logs.service";import{EntityChangeType}from"../../proxy/auditing/entity-change-type.enum";const ɵ0="AuditLogging.EntityChangesComponent";export class EntityChangesComponent{constructor(n,t,e,r){this.list=n,this.fb=t,this.auditLogsService=e,this.track=r,this.form=this.fb.group({entityChangeType:[""],entityTypeFullName:[""],startDate:[""],endDate:[""]}),this.response={items:[],totalCount:0},this.changeType=EntityChangeType,this.changeTypes=mapEnumToOptions(EntityChangeType)}get data(){return this.response.items}get count(){return this.response.totalCount}ngAfterViewInit(){this.hookToQuery()}hookToQuery(){this.list.hookToQuery(n=>this.auditLogsService.getEntityChanges(Object.assign(Object.assign({},this.form.value),n))).subscribe(n=>this.response=n)}handleSubmit(){this.list.get()}}EntityChangesComponent.decorators=[{type:Component,args:[{selector:"abp-entity-changes",template:'<div class="card">\r\n  <div class="card-body pb-lg-3">\r\n    <form [formGroup]="form" (ngSubmit)="handleSubmit()">\r\n      <div class="row">\r\n        <div class="col-md-6 col-xl-3">\r\n          <div class="form-group">\r\n            <label for="start-date">{{\r\n              \'AbpAuditLogging::EntityChangeStartTime\' | abpLocalization\r\n            }}</label\r\n            ><input\r\n              ngbDatepicker\r\n              #pickerStart="ngbDatepicker"\r\n              id="start-date"\r\n              class="form-control"\r\n              formControlName="startDate"\r\n              readonly\r\n              (click)="pickerStart.toggle()"\r\n              (keyup.space)="pickerStart.open()"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class="col-md-6 col-xl-3">\r\n          <div class="form-group">\r\n            <label for="end-date">{{\r\n              \'AbpAuditLogging::EntityChangeEndTime\' | abpLocalization\r\n            }}</label\r\n            ><input\r\n              ngbDatepicker\r\n              #pickerEnd="ngbDatepicker"\r\n              id="end-date"\r\n              class="form-control"\r\n              formControlName="endDate"\r\n              readonly\r\n              (click)="pickerEnd.toggle()"\r\n              (keyup.space)="pickerEnd.open()"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class="col-md-6 col-xl-3">\r\n          <div class="form-group">\r\n            <label for="change-type">{{ \'AbpAuditLogging::ChangeType\' | abpLocalization }}</label\r\n            ><select\r\n              id="change-type"\r\n              class="custom-select form-control"\r\n              formControlName="entityChangeType"\r\n              (change)="handleSubmit()"\r\n            >\r\n              <option [ngValue]=""></option>\r\n              <option\r\n                *ngFor="let type of changeTypes; trackBy: track.by(\'id\')"\r\n                [ngValue]="type.value"\r\n                >{{ \'AbpAuditLogging::\' + type.key | abpLocalization }}</option\r\n              >\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-6 col-xl-3">\r\n          <div class="form-group">\r\n            <label for="entity-type-full-name">{{\r\n              \'AbpAuditLogging::EntityTypeFullName\' | abpLocalization\r\n            }}</label\r\n            ><input\r\n              id="entity-type-full-name"\r\n              type="text"\r\n              class="form-control"\r\n              formControlName="entityTypeFullName"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <button type="submit" class="btn btn-primary btn-block mt-0 mt-md-4">\r\n            <span>\r\n              {{ \'AbpAuditLogging::Refresh\' | abpLocalization }}\r\n            </span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n<div class="card">\r\n  <div class="card-body p-0">\r\n    <ngx-datatable default [rows]="data" [count]="count" [list]="list">\r\n      <ngx-datatable-column\r\n        [name]="\'AbpAuditLogging::Detail\' | abpLocalization"\r\n        [maxWidth]="150"\r\n        [width]="150"\r\n        [sortable]="false"\r\n      >\r\n        <ng-template let-row="row" let-i="rowIndex" ngx-datatable-cell-template>\r\n          <abp-grid-actions\r\n            [index]="i"\r\n            [record]="row"\r\n            text="AbpAuditLogging::Actions"\r\n          ></abp-grid-actions>\r\n        </ng-template>\r\n      </ngx-datatable-column>\r\n      <ngx-datatable-column\r\n        [name]="\'AbpAuditLogging::Time\' | abpLocalization"\r\n        [width]="230"\r\n        prop="changeTime"\r\n      >\r\n      </ngx-datatable-column>\r\n      <ngx-datatable-column\r\n        [name]="\'AbpAuditLogging::ChangeType\' | abpLocalization"\r\n        [width]="140"\r\n        [sortable]="false"\r\n      >\r\n        <ng-template let-row="row" ngx-datatable-cell-template>\r\n          {{ \'AbpAuditLogging::\' + changeType[row.changeType] | abpLocalization }}\r\n        </ng-template>\r\n      </ngx-datatable-column>\r\n      <ngx-datatable-column name="TenantId" [width]="150" [sortable]="false">\r\n        <ng-template let-row="row" ngx-datatable-cell-template>\r\n          <div abpEllipsis>{{ row.tenantId }}</div>\r\n        </ng-template>\r\n      </ngx-datatable-column>\r\n      <ngx-datatable-column\r\n        [name]="\'AbpAuditLogging::EntityTypeFullName\' | abpLocalization"\r\n        [width]="150"\r\n        [sortable]="false"\r\n      >\r\n        <ng-template let-row="row" ngx-datatable-cell-template>\r\n          <div abpEllipsis>{{ row.entityTypeFullName }}</div>\r\n        </ng-template>\r\n      </ngx-datatable-column>\r\n    </ngx-datatable>\r\n  </div>\r\n</div>\r\n',changeDetection:ChangeDetectionStrategy.OnPush,providers:[ListService,{provide:EXTENSIONS_IDENTIFIER,useValue:ɵ0},{provide:NgbDateAdapter,useClass:DateAdapter}]}]}],EntityChangesComponent.ctorParameters=()=>[{type:ListService},{type:FormBuilder},{type:AuditLogsService},{type:TrackByService}];export{ɵ0};