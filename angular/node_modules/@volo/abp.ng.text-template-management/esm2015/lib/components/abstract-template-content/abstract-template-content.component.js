import{Component,Injector}from"@angular/core";import{FormBuilder,Validators}from"@angular/forms";import{ActivatedRoute}from"@angular/router";import{ToasterService}from"@abp/ng.theme.shared";import{finalize,tap,switchMap}from"rxjs/operators";import{TemplateContentService}from"../../proxy/text-templates/template-content.service";export class AbstractTemplateContentComponent{constructor(t){this.injector=t,this.templateContent={},this.fb=t.get(FormBuilder),this.templateContentService=t.get(TemplateContentService),this.route=t.get(ActivatedRoute),this.toaster=t.get(ToasterService)}ngOnInit(){this.form=this.fb.group({content:["",[Validators.required]]}),this.getData().subscribe()}getData(){const t=this.route.snapshot.params.name;return this.templateContentService.get({templateName:t,cultureName:this.selectedCultureName}).pipe(tap(t=>{this.templateContent=t,this.form.get("content").setValue(this.templateContent.content)}))}save(t){if(this.form.invalid)return;this.busy=!0;const{content:e}=this.form.value;this.templateContentService.update({templateName:this.templateContent.name,cultureName:this.selectedCultureName,content:e}).pipe(finalize(()=>this.busy=!1)).subscribe(()=>{this.toaster.success("TextTemplateManagement::Success"),t&&t()})}restoreToDefault(){this.busy=!0,this.templateContentService.restoreToDefault({templateName:this.templateContent.name,cultureName:this.selectedCultureName}).pipe(switchMap(()=>this.getData()),finalize(()=>this.busy=!1)).subscribe(()=>{this.toaster.success("TextTemplateManagement::Success")})}}AbstractTemplateContentComponent.decorators=[{type:Component,args:[{template:""}]}],AbstractTemplateContentComponent.ctorParameters=()=>[{type:Injector}];