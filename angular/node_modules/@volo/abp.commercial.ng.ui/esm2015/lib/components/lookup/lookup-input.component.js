import{AbstractNgModelComponent}from"@abp/ng.core";import{Component,Injector,Input}from"@angular/core";import{NgControl}from"@angular/forms";export class LookupInputComponent extends AbstractNgModelComponent{constructor(t){super(t),this.lookupNameProp="displayName",this.displayNameProp="name",this.pickButton={show:!0,disabled:!1},this.clearButton={show:!0,disabled:!1},this.selectedName="",this.ngControl=t.get(NgControl),this.ngControl.valueAccessor=this}get isInvalid(){return this.ngControl.dirty&&this.ngControl.invalid}ngAfterViewInit(){this.value&&this.editingData&&this.editingData[this.displayNameProp]&&(this.selectedName=this.editingData[this.displayNameProp])}pick(t){this.value=t.id,this.selectedName=t[this.lookupNameProp],this.isModalVisible=!1}onClickPick(){this.isModalVisible=!0}onClickClear(){this.value="",this.selectedName=""}writeValue(t){t||(this.selectedName=""),super.writeValue(t)}}LookupInputComponent.decorators=[{type:Component,args:[{selector:"abp-lookup-input",template:'<div class="input-group">\r\n  <input\r\n    [id]="cid"\r\n    type="text"\r\n    class="form-control"\r\n    disabled\r\n    [ngModel]="selectedName"\r\n    [class.input-validation-error]="isInvalid"\r\n  />\r\n  <div class="input-group-append">\r\n    <button\r\n      *ngIf="pickButton.show"\r\n      [disabled]="pickButton.disabled"\r\n      class="btn btn-info"\r\n      type="button"\r\n      (click)="onClickPick()"\r\n    >\r\n      {{ { key: \'::Pick\', defaultValue: \'Pick\' } | abpLocalization }}\r\n    </button>\r\n    <button\r\n      *ngIf="clearButton.show"\r\n      [disabled]="clearButton.disabled"\r\n      class="btn btn-danger"\r\n      type="button"\r\n      (click)="onClickClear()"\r\n    >\r\n      <i class="fa fa-times"></i>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<abp-modal [(visible)]="isModalVisible">\r\n  <ng-template #abpHeader>\r\n    <h3>{{ { key: \'::Pick\', defaultValue: \'Pick\' } | abpLocalization }}</h3>\r\n  </ng-template>\r\n\r\n  <ng-template #abpBody>\r\n    <abp-lookup-table\r\n      [getFn]="getFn"\r\n      [lookupNameProp]="lookupNameProp"\r\n      (pick)="pick($event)"\r\n    ></abp-lookup-table>\r\n  </ng-template>\r\n\r\n  <ng-template #abpFooter>\r\n    <button type="button" class="btn btn-secondary" #abpClose>\r\n      {{ \'AbpUi::Cancel\' | abpLocalization }}\r\n    </button>\r\n  </ng-template>\r\n</abp-modal>\r\n'}]}],LookupInputComponent.ctorParameters=()=>[{type:Injector}],LookupInputComponent.propDecorators={getFn:[{type:Input}],lookupNameProp:[{type:Input}],displayNameProp:[{type:Input}],editingData:[{type:Input}],pickButton:[{type:Input}],clearButton:[{type:Input}],cid:[{type:Input}]};