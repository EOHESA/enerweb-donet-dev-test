import{AuthService,ConfigStateService,EnvironmentService,SessionStateService}from"@abp/ng.core";import{Component}from"@angular/core";import{Router}from"@angular/router";export class CurrentUserComponent{constructor(e,n,r,t,a){this.authService=e,this.router=n,this.sessionState=r,this.configState=t,this.environment=a,this.currentUser$=this.configState.getOne$("currentUser"),this.selectedTenant$=this.sessionState.getTenant$(),this.currentUserImageComponentKey="Theme.CurrentUserImageComponent"}get smallScreen(){return window.innerWidth<992}get manageProfileUrl(){return`${this.issuer}/Account/Manage?returnUrl=${window.location.href}`}get securityLogsUrl(){return`${this.issuer}/Account/SecurityLogs?returnUrl=${window.location.href}`}get issuer(){return this.environment.getEnvironment().oAuthConfig.issuer}initLogin(){this.authService.initLogin()}logout(){this.authService.logout().subscribe()}}CurrentUserComponent.decorators=[{type:Component,args:[{selector:"abp-current-user",template:'<ng-container *ngIf="currentUser$ | async as user">\r\n  <ng-template #loginBtn>\r\n    <a role="button" class="btn" (click)="initLogin()">{{\r\n      \'AbpAccount::Login\' | abpLocalization\r\n    }}</a>\r\n  </ng-template>\r\n  <div *ngIf="user.isAuthenticated; else loginBtn" class="dropdown btn-group" ngbDropdown>\r\n    <a ngbDropdownToggle class="btn pointer">\r\n      <abp-current-user-image\r\n        *abpReplaceableTemplate="{\r\n          componentKey: currentUserImageComponentKey,\r\n          inputs: { currentUser: { value: user }, classes: { value: \'user-avatar\' } }\r\n        }"\r\n        classes="user-avatar"\r\n      ></abp-current-user-image>\r\n      <span class="ml-1">\r\n        <small *ngIf="(selectedTenant$ | async)?.name as tenantName"\r\n          ><i>{{ tenantName }}</i>\\</small\r\n        >\r\n        <span>{{ user.userName }}</span>\r\n      </span>\r\n    </a>\r\n    <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right">\r\n      <div class="p-2 row">\r\n        <div class="pr-0 col col-auto">\r\n          <abp-current-user-image\r\n            *abpReplaceableTemplate="{\r\n              componentKey: currentUserImageComponentKey,\r\n              inputs: { currentUser: { value: user }, classes: { value: \'user-avatar-big\' } }\r\n            }"\r\n            classes="user-avatar-big"\r\n          ></abp-current-user-image>\r\n        </div>\r\n        <div class="pl-2 col">\r\n          <span>{{ \'AbpAccount::Welcome\' | abpLocalization }}</span\r\n          ><br />\r\n          <small *ngIf="(selectedTenant$ | async)?.name as tenantName"\r\n            ><i>{{ tenantName }}</i>\\</small\r\n          >\r\n          <strong>{{ ((user.name || \'\') + \' \' + (user.surName || \'\')).trim() || user.userName }}</strong>\r\n        </div>\r\n      </div>\r\n      <div class="dropdown-divider"></div>\r\n      <a class="dropdown-item pointer" [href]="manageProfileUrl">{{\r\n        \'AbpAccount::ManageYourProfile\' | abpLocalization\r\n      }}</a>\r\n      <a class="dropdown-item pointer" [href]="securityLogsUrl">{{\r\n        \'AbpAccount::MySecurityLogs\' | abpLocalization\r\n      }}</a>\r\n      <a class="dropdown-item pointer" id="logout" (click)="logout()">{{\r\n        \'AbpUi::Logout\' | abpLocalization\r\n      }}</a>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n'}]}],CurrentUserComponent.ctorParameters=()=>[{type:AuthService},{type:Router},{type:SessionStateService},{type:ConfigStateService},{type:EnvironmentService}];